 <head>
  <meta charset="UTF-8">
  <meta name="description" content="Free Web tutorials">
  <meta name="keywords" content="HTML,CSS,XML,JavaScript">
  <meta name="author" content="John Doe">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="js/download.js"></script>
  <script src="js/js-yaml.min.js"></script>
 </head> 


	<script>
		/////////////////////////////////////////////// HOW TO USE THIS LIBRARY /////////////////////////////////////////////////////////
		
		// Set SessionStorage
		// example ->

		
		//	sessionStorage.setItem("mqhost","192.168.77.1")
		//	sessionStorage.setItem("mqport","1883")
		//	sessionStorage.setItem("mquser","sam")
		//	sessionStorage.setItem("mqpass","pass")
		//	sessionStorage.setItem("mqpubtopic","hello")
		//	sessionStorage.setItem("mqsubtopic","world")

		// then redirect the page using window.location.href="download.html"
		//window.location.href = "download.html"
		
		/////////////////////////////////////////////// HOW TO USE THIS LIBRARY /////////////////////////////////////////////////////////
	</script>


<body>

<pre>
-----------------------------------------------------
	I3 PUBLISH SUBSCRIBE TOOL DOWNLOAD
-----------------------------------------------------


Step 1: 
	git clone https://github.com/neveisa/i3 <br>

Step 2: 
	Download the file below into i3/tools/conf.d/config.yml

</pre>

	<pre id="config-display"></pre>
	<button style="display:none" id="dlbutton" onclick="function _dl(){download(config_yaml,'config.yml','text/plain')};_dl()">download</button>
</body>


	<script>
		function put_config()
		{

			host=sessionStorage.getItem("mqhost")
			port=sessionStorage.getItem("mqport")
			user=sessionStorage.getItem("mquser")
			pass=sessionStorage.getItem("mqpass")
			pub_topic=sessionStorage.getItem("mqpubtopic")
			sub_topic=sessionStorage.getItem("mqsubtopic")
			
			config={}
			
			config['host']=host?host:"";
			config['port']=port?Number(port):"";
			
			config['user']=user?user:"";
			config['pass']=pass?pass:"";
			
			config['pub_topic']=pub_topic?pub_topic:"";
			config['sub_topic']=sub_topic?sub_topic:"";
			
			window.config_yaml=jsyaml.safeDump(config)
			
			console.log("Dumping YAML =>")
			console.log(config_yaml);

			//display config
			el=document.getElementById("config-display")
			el.innerHTML="config.yml \n----------------\n\n"+config_yaml + "________________\n"

			//show button
			document.getElementById("dlbutton").style.display="block"

		}

		if(sessionStorage.getItem("mqhost")){
		}
		else{
			sessionStorage.setItem('mqhost', 'localhost');	
			sessionStorage.setItem('mqport', '1883');	
			
			sessionStorage.setItem('mquser', 'sam');	
			sessionStorage.setItem('mqpass', 'pass');	
			
			sessionStorage.setItem('mqpubtopic', 'hello');	
			sessionStorage.setItem('mqsubtopic', 'world');	
		}
			
		put_config();

	</script>
